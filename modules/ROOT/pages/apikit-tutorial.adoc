= Workflow: Create, Run, and Test an APIkit Project
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:page-aliases: start-project-task.adoc, apikit-create.adoc, apikit-run-test.adoc, apikit-add-logic.adoc, apikit-deploy.adoc, apikit-test-policy.adoc
:keywords: apikit, raml, tutorial, api, rest

In this workflow, you build an APIkit project that imports a RAML. You run the API in *Anypoint Studio* and use *API Console* to simulate calls to the API.

Studio 6.0 or later is recommended for this procedure. The API you create covers two main tasks:

* Updating vending machine data to update the central database on each sale
* Tracking inventory to find out if a machine is low on stock

== Create a New APIkit Project

This procedure launches the new project and generates a *Main Flow* with an *HTTP Listener*, an *APIkit Router*, and references to flows to handle errors. The project support REST resources and methods. These flows, called skeleton flows, are the bare minimum structure needed to support the RAML specification. The RAML file imported by this procedure is located at *src/main/api*.

. Download the example file to your local drive:
+
link:{attachmentsdir}/api.raml[api.raml]
. Under the *File* menu, select *New* > *Mule Project*.
. In the *New Mule Project* wizard, enter a *Project Name* (*myproject*, for example). *Mule Server 3.8.0* will be selected by default in the *Runtime* section.
+
. Check *Add APIkit Components*.
. In the *APIkit Settings* section, select the downloaded *api.raml* example file.
+
image::apikit-tutorial-3e0e4.png["Project Settings for a New Mule Project, including Project Name, Runtime, Maven Settings, Version Control System Support, APIkit Settings, and API Definition.",height=633,width=600]
+
. Click *Finish*.

== Run and Test the Project
. Right-click the project name in the *Project Explorer* and select *Run As* > *Mule Application*.
+
The *APIkit Console* appears and displays the resource-action pairs exposed by the API.
+
. Click *Introduction* to expand the API description.
+
The main *Introduction* title and the sentence map to the contents of *Documentation* in the root section of the RAML file.
+
.  In the *Resource* section, click */machines* to expand *GET: /machines*.
. Click *Try It* label.
+
The baseURI is optional in a RAML-backed API but is required by the API-Console *Try It* functionality. *Try It* is disabled if there is no baseURI.
+
image::fv-601.png["The Try It feature is disabled because baseURI is not present."]
+
In the RAML, you can use an arbitrary value, for example +http://www.example.com+ for the baseURI.
+
.  To send a test call to get a list of machines, click *GET*.
+
image::apikitt-get.png["GET button is highlighted to test the get call."]
+
. The API returns a list of machines.
+
The output is the payload set on the message by the *get:/machines:apiConfig* flow.
+
[source,json,linenums]
----
{
  "count": 3,
  "machines": [
    {
      "id": "ZX4102",
      "location": "Starbuck's, 442 Geary Street, San Francisco, CA 94102"
    },
    {
      "id": "ZX5322",
      "location": "Starbuck's, 462 Powell Street, San Francisco, CA 94102"
    },
    {
      "id": "ZX6792",
      "location": "Cafe La Taza, 470 Post Street, San Francisco, CA 94102"
    }
  ]
}
----

== Add Logic to the Project

For example purposes, add over-simplified logic to the project to use later in *API Manager*. Unlike the APIkit-generated flows, the flow you create during this procedure returns a payload message when you call the API from a browser.

. Drag an HTTP component to the canvas.
+
Studio creates a flow named *apiFlow* by default.
+
. In the *apiflow*, select the *HTTP Connector* to open its properties editor.
.  To edit the *Connector Configuration* global configuration element, click the edit button.
. Change the value of the *Base Path* as follows:
+
`remote-vending`
+
. Click *OK*.
. In the properties editor, change the *Path* setting from */* to */test-policy*.
. Drag a *Set Payload* component to the process area of *apiFlow*.
. Set the *Value* of the payload to *test policy*.
. Save the changes.

Deploy the APIkit project from Studio to Exchange, and apply and test policies via API Manager.

== See Also

* xref:apikit-basic-anatomy.adoc#backend-flows[Backend flows]
* xref:studio::export-to-exchange-task.adoc[Publishing a Project to Exchange]
* xref:api-manager::policy-mule3-tutorial-manage-an-api.adoc#to-apply-the-policy[Applying a Policy]
